########## Contact Macros - Locale ##########

- macro: International_Contacts 
  fields:
    __locale:
      random_choice:                # The choice made here for the locale means that the Contact's locale influenced fields will be from the same locale, when referenced
        - en_GB   # English (Great Britain)
        - ja_JP   # Japanese (Japan)
        - en_AU   # English (Australia)
        - fr_FR   # French (France)
        - fr_CA   # French (Canada)
        - es_ES   # Spanish (Spain)
        - es_MX   # Spanish (Mexico)

    FirstName:
      i18n_fake:
        fake: first_name
        locale: ${{__locale}}
    LastName:
      i18n_fake:
        fake: last_name
        locale: ${{__locale}}
    Description: ${{__locale}}      #The selected Locale used to create the Contact is added to the description field for clarity
    MailingStreet:                  
      i18n_fake:
        fake: street_address
        locale: ${{__locale}}
    MailingCity:
      i18n_fake:
        fake: city
        locale: ${{__locale}}
    MailingState:                   #Depending on the country, the "State" can potentially be "Prefecture" or "County", meaning we need additional logic to choose which fake data to insert
      if:
        - choice:
            when: ${{__locale=='en_AU'}}
            pick:
              i18n_fake:
                fake: state
                locale: ${{__locale}}
        - choice:
            when: ${{__locale=='ja_JP'}}
            pick:
              i18n_fake:
                fake: prefecture
                locale: ${{__locale}}
        - choice:
            when: ${{__locale=='en_GB'}}
            pick:
              i18n_fake:
                fake: county
                locale: ${{__locale}}
        - choice:
            when: ${{__locale=='fr_FR'}}
            pick:
              i18n_fake:
                fake: administrative_unit   #This reference, administrative_unit, is used to automatically choose state/county/prefecture/etc. as the value to be populated depending on country
                locale: ${{__locale}}       #...meaning that we don't have to create long additional logic to determine the value to input in the field, snowfakery will choose the right one to insert for us
        - choice:
            when: ${{__locale=='fr_CA'}}
            pick:
              i18n_fake:
                fake: administrative_unit
                locale: ${{__locale}}
        - choice:
            when: ${{__locale=='es_ES'}}
            pick:
              i18n_fake:
                fake: state
                locale: ${{__locale}}
        - choice:
            when: ${{__locale=='es_MX'}}
            pick:
              i18n_fake:
                fake: administrative_unit
                locale: ${{__locale}}
    MailingPostalCode:
      i18n_fake:
        fake: postcode
        locale: ${{__locale}}
    MailingCountry:
      i18n_fake:
        fake: country
        locale: ${{__locale}}
    Phone:
      i18n_fake:
        fake: phone_number
        locale: ${{__locale}}

########## Organization Marcros - Locale ##########

- object: Account
  nickname: organization_accounts
  fields:
    __locale:
      random_choice:
        - en_GB
        - ja_JP
        - en_AU
        - fr_FR
        - fr_QC
        - es_ES
        - es_MX
    name:
      i18n_fake:
        fake: company
        locale: ${{__locale}}
    Description: ${{__locale}}
    BillingStreet:
      i18n_fake:
        fake: street_address
        locale: ${{__locale}}
    BillingCity:
      i18n_fake:
        fake: city
        locale: ${{__locale}}
    BillingState:
      if:
        - choice:
            when: ${{__locale=='en_AU'}}
            pick:
              i18n_fake:
                fake: state
                locale: ${{__locale}}
        - choice:
            when: ${{__locale=='ja_JP'}}
            pick:
              i18n_fake:
                fake: prefecture
                locale: ${{__locale}}
        - choice:
            when: ${{__locale=='en_GB'}}
            pick:
              i18n_fake:
                fake: county
                locale: ${{__locale}}
        - choice:
            when: ${{__locale=='fr_FR'}}
            pick:
              i18n_fake:
                fake: ''
                locale: ${{__locale}}
        - choice:
            when: ${{__locale=='fr_CA'}}
            pick:
              i18n_fake:
                fake: state
                locale: ${{__locale}}
        - choice:
            when: ${{__locale=='es_ES'}}
            pick:
              i18n_fake:
                fake: state
                locale: ${{__locale}}
        - choice:
            when: ${{__locale=='es_MX'}}
            pick:
              i18n_fake:
                fake: state
                locale: ${{__locale}}
    BillingPostalCode:
      i18n_fake:
        fake: postcode
        locale: ${{__locale}}
    BillingCountry:
      i18n_fake:
        fake: country
        locale: ${{__locale}}

########## Affiliation Dates ##########

- macro: affiliation_info
  fields:
    npe5__StartDate__c:
      date_between:
        start_date: 1990-01-01          #Affiliations created can have this Start Date or later
        end_date: -30d                  #the Start Date can be as recent as 30 days prior to the data generated date
      random_choice:
    npe5__EndDate__c:                   #For Affiliations, we don't want all of them to have an End Date if they are still active
        - choice:                       #This logic chooses 75% of records have an end date between 1 and 29 days prior to date data generated
            probability: 75%
            pick:
              date_between:
                start_date: -29d
                end_date: -1d
        - choice:
            probability: 25%
            pick: ~                     #This ~ indicates a null value to allow us to generate a blank in 25% of instances
    npe5__Status__c:
      if:
        - choice:
            when: ${{npe5__EndDate__c!=None }}      #This means "If there is a value in the End Date field, set status to 'Former'"
            pick: Former
        - choice:
            when: ${{npe5__EndDate__c==None }}      #This means "If there is NOT a value in the End Date field, set status to 'Current'"
            pick: Current                           #...this behaviour is in line with NPSP's handling of Affiliation records in Current vs. Former scenarios
    npe5__Role__c:
      i18n_fake:
        fake: job
        locale: ${{__locale}}
    npe5__Primary__c: TRUE              #The generated Affiliation record is marked as Primary for the associated Contact

########## Relationships ##########

- object: Contact
  nickname: relationship_contacts
  count: 2
  include: International_Contacts
  fields:
    Email:
      fake: safe_email


########## General Accounting Units ##########

  #This will generate 3 GAUs only, as we don't need the same number of GAU as we do Contacts and Accounts
- object: npsp__General_Accounting_Unit__c
  nickname: GAU1
  just_once: True
  fields:
    name: Snowfakery GAU 1 -- <<today>>

- object: npsp__General_Accounting_Unit__c
  nickname: GAU2
  just_once: True
  fields:
    name: Snowfakery GAU 2 -- <<today>>

- object: npsp__General_Accounting_Unit__c
  nickname: GAU3
  just_once: True
  fields:
    name: Snowfakery GAU 3 -- <<today>>


########## Contacts ##########

- object: Contact
  fields:
    Email:
      fake: safe_email
  include: International_Contacts     #The macro we referenced above with the locale-specific random choices for field values
  friends:
    - object: npe5__Affiliation__c
      include: affiliation_info       #The affiliation macro we referenced above to link Contacts and Accounts created
      fields:
        npe5__Contact__c:
          reference: Contact
        npe5__Organization__c:
          reference: organization_accounts
    - object: npe4__Relationship__c
      fields:
        npe4__Contact__c:
          reference: Contact
        npe4__RelatedContact__c:
          reference: relationship_contacts
        npe4__Status__c:
          random_choice:            #This random choice is to ensure a mix of Current and Former Relationship records
            - choice:
                probability: 50%
                pick: Current
            - choice:
                probability: 50%
                pick: Former
        npe4__Type__c:
          random_choice:
            - Friend
            - Family
            - Coworker
            - Father
            - Mother
            - Parent
            - Son
            - Daughter
            - Child
            - Aunt
            - Uncle
            - Partner
            - Cousin




